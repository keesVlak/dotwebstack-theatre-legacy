(function(c,b,d){var a=c.L;a.Label=(a.Layer?a.Layer:a.Class).extend({includes:a.Mixin.Events,options:{className:"",clickable:false,direction:"right",noHide:false,offset:[12,-15],opacity:1,zoomAnimation:true},initialize:function(e,f){a.setOptions(this,e);this._source=f;this._animated=a.Browser.any3d&&this.options.zoomAnimation;this._isOpen=false},setLatLng:function(e){this._latlng=a.latLng(e);if(this._map){this._updatePosition()}return this},setContent:function(e){this._content=e;return this},onAdd:function(e){this._map=e;if(!this._container){this._initLayout()}this._update();e.on("viewreset",this._onViewReset,this).on("zoomanim",this._zoomAnimation,this)},_initLayout:function(){this._container=b.createElementNS("http://www.w3.org/2000/svg","text");var f=this._content+" ";var e=f.replace(/(.{17,17})(.+)/,"$1...").replace(/(.{0,17}) /g,"$1~").split("~");for(var g=0;g<e.length;g++){var h=b.createElementNS("http://www.w3.org/2000/svg","tspan");h.textContent=e[g];this._container.appendChild(h)}this._source._path.parentNode.appendChild(this._container)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e,this._map.getZoom())},_update:function(){if(!this._map){return}this._updatePosition()},_zoomAnimation:function(e){var f=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPosition(f,e.zoom)},_onViewReset:function(f){if(f&&f.hard){this._update()}},_setPosition:function(h,g){var e=Math.pow(2,g+1);this._container.setAttribute("x",h.x+e);this._container.setAttribute("y",h.y-e);this._container.style.fontSize=e+"px";for(var f=0;f<this._container.childNodes.length;f++){this._container.childNodes.item(f).setAttribute("x",h.x+e);this._container.childNodes.item(f).setAttribute("dy",e)}}});a.BaseMarkerMethods={showLabel:function(){if(this.label&&this._map){this.label.setLatLng(this._latlng);this._map.showLabel(this.label)}return this},bindLabel:function(f,e){this.label=new a.Label(e,this).setContent(f);return this},_moveLabel:function(f){if(this.label._map){this.label.setLatLng(f.latlng)}}};a.Marker.include(a.BaseMarkerMethods);a.CircleMarker.include(a.BaseMarkerMethods);a.FeatureGroup.include({bindLabel:function(f,e){return this.invoke("bindLabel",f,e)},showLabel:function(){return this.invoke("showLabel")}});a.Map.include({showLabel:function(e){return this.addLayer(e)}})}(window,document));